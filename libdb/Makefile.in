# Database library Makefile for the man package.
#
# Copyright (C) 1994, 1995 Graeme Wilford.
# Copyright (C) 2001, 2003 Colin Watson.
#
# This file is part of man-db.
#
# man-db is free software; you can redistribute it and/or modify it
# under the terms of the GNU General Public License as published by
# the Free Software Foundation; either version 2 of the License, or
# (at your option) any later version.
#
# man-db is distributed in the hope that it will be useful, but
# WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with man-db; if not, write to the Free Software Foundation,
# Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA
#
# Wed June  6 15:44:47 BST 1994 Wilf. (G.Wilford@ee.surrey.ac.uk):

library = libmandb.a

srcdir = @srcdir@
VPATH = @srcdir@
top_srcdir = @top_srcdir@

USE_NLS = @USE_NLS@

include $(top_srcdir)/include/Defines

.PHONY: $(DEFAULT_TARGETS)

MANDEFS =
MANCPPFLAGS = -I$(top_srcdir)/include -I$(top_srcdir) -I$(srcdir)
ifeq ($(USE_NLS),yes)
MANCPPFLAGS += -I$(top_srcdir)/intl
endif

# The default programs to build
ALL = db_store.o db_delete.o db_lookup.o \
      db_ver.o db_btree.o db_gdbm.o db_ndbm.o

# The default programs to build
all: $(library)

$(library): $(library)($(ALL))
	-$(RANLIB) $@

# The standard targets
install uninstall:

clean mostlyclean:
	rm -rf .depend
	rm -f *~ core $(ALL) $(library)

distclean: clean
	rm -f Makefile

realclean: distclean
	rm -f tags
	
TAGS:
	$(MKTAGS) $(srcdir)/*.[ch]

# These lines sort out proper dependencies.
ifeq (,$(findstring clean,$(MAKECMDGOALS)))
  SRCS = $(notdir $(wildcard $(srcdir)/*.c))
  -include $(SRCS:%.c=.depend/%.d)
endif
